from django.shortcuts import render
from django.http import HttpResponse
import json
import csv
from sklearn.metrics.pairwise import cosine_similarity
from sklearn.feature_extraction.text import CountVectorizer
import pandas as pd
import numpy as np
from numpy import nan
from myapp.models import User
from django.views.decorators.csrf import csrf_exempt


def index(request):
    categories = [
   '#photographyislife #photography #photographyeveryday #nikonphoto #photographyoftheday #agameoftones #photographyislifee #photographer #justgoshoot #ig_myshot #photographylover #master_shots #photographysouls #photographyprops #photographyoftheday #photographyaddict #photographylover #canon_photos #cpcollectives #portraitphotography #portraitmood #portraits_ig #portraitphotographer #makeportraits #portraitoftheday #portraitpage #rsa_portraits #bestportraits #portraitstyles_gf #ig_portrait #top_portraits #postmoreportraits #life_portraits #bestphotogram_portraits #pursuitofportraits #instagram_faces #profile_vision #featurepalette #discoverportrait #portraits_universe #ftmedd #2instagoodportraitlove #majestic_people #makeportrait #tangledinfilm #streetart #building #streetphoto #buildings #town #graffiti #architecturelovers #cities #architexture #lines #urbanart #archidaily #skyscraper #citylife #composition #archilovers #geometry #arts #streetlife #architectureporn #abstract #perspective #people #minimal #bnw #lookingup #road #geometric #photos #picture #everybodystreet #streetphoto_bw #lensculture #lensculturestreets #streetlife_award #urbanphotography #ig_street #streetview #street_photo_club #streets #streetphotography_bw #streetshot #SPiCollective #street_photography #magnumphotos #documentary #wearethestreet #streetportrait #beststreets #monochrome #hikaricreative #blackandwhitephotography #documentaryphotography #streetbwcolor #bnw_life #bnw #weddingphotography #weddingplanner #weddinginspiration #weddingideas #greenweddingshoes #instawedding #theknot #bridal #destinationwedding #bridetobe #engaged #prewedding #junebugweddings #dugunfotografcisi #weddingplanning #brideandgroom #engagement #weddinginspo #instabride #destinationweddingphotographer #weddingstyle #stylemepretty #ido #bnw #bw #blackandwhitephotography #monochrome #bnw_society #bnw_captures #bnw_life #bw_lover #blackandwhitephoto #bnw_planet #monoart #blancoynegro #bw_photooftheday #noir #bw_society #instablackandwhite #igersbnw #monochromatic #bnw_demand #insta_bw #bnw_rose #bnw_globe #white #bw_crew #bnwmood #bwstyles_gf #noiretblanc #irox_bw #monotone #rsa_bnw #fashionshoot #fashionstudy #fashionoftheday #fashioneditorial #fashionphotographer #fashiontrends #fashionforward #fashions #fashionkilla #fashioninspiration #fashionkilla #fashionworld #fashioninspiration #editorialshoot #fashiontrends #astrophotography #milkyway #astro_photography_ #nightscaper #astronomy #nightsky #nightscape #milkywaychasers #starrynight #natgeospace #astrophoto #stars #universetoday #milkywaygalaxy #longexposure #nightphotography #nightimages #nightshooters #ig_astrophotography #skymasters #space #stargazing #longexposure_shots #fs_longexpo #galaxy #longexpo #nightpics #rsa_night #longexpoelite #night_shooterz #petsofinstagram #petstagram #instapet #weeklyfluff',
   '#classy #fashionweek #stylefashion #casual #swag #suit #fashion #mode #lookbook #fashioninspiration #falllook #model #rosehappy #fashionista #instafashion #outfitoftheday #ootd #bag #armanibag #belt #armanibelt #ceinture #portefeuille #wallet #armaniwallet #accessoires #modefemme #frenchfashionblog #blogueusemode #modeuse #frenchfashionblogger #lovefashion #modefashion #styling #cute #outfitootd #modafeminina #hermosa  #fashionstyle #instamoda #ootdshare #styleblog #styleoftheday #modablogueira #outfitinspiration #lookoftheday #instyle #casualstyle #dress #jaket #jaketparkacowok #clothing #fashionterupdate #denim #denimjacket #parisfashionweek #inspiration #jeans #nike #tumblr #milan #hypebeast #sneakersaddict #shoes #kicks #stylist #italy #magazine #fashionphotography  #couture #handmade #modern #Vintage #InstaFashion #StreetStyle #FashionBlogger #OutfitOfTheDay #LookOfTheDay #FashionWeek #WhatIWore #Trend #WIW #WIWT #Look #FashionAddict #FashionLover #Fashionista #OutfitPost #FashionDaily #FashionStylist #StyleBlog #StreetWear #FashionPost #FashionGram #MensFashion #MenWithStyle #MenWithStreetStyle #MensWear #MensFashion #MensFashionPost #MenStyle #MensStyle #FashionMen #MenFashionStyle #HighFashionMen #GuysWithStyle #MensOutfit #MensOOTD #ManStyle #MaleFashion #MensWearDaily #MaleModel #MaleBlogger #StyleInspiration #Trendy #Trendsetter #HowToStyle #Vintage #BohemianLook #BohoChic #Grunge #HippieGirls #FlowerChild #Minimalist #DressedUp #Couture #UrbanStyle #OutfitInspo #OOTD #Clothes #HighFashion #CurrentlyWearing #Neutrals #Stripes #CasualStyle #CasualOutfit #Comfy #StyleOfTheDay #OutfitGoals #Shoes #NewShoes #Sneakers #SneakerHead #Boots #Booties #Heels #HighHeels #Kicks #InstaKicks #IGSneakerCommunity #Kickstagram #ShoePorn #Shoestagram #InstaShoes #SoleCollector #Shoegasm #SoleOnFire #NiceKicks #RedBottoms #ShoeStyle #ShoeGame #Accessories #Accessory #Accessorize #Jewelry #Bling #InstaJewelry #HandmadeJewelry #JewelryGram #Jewels #Necklace #Bracelet #Rings #Earrings #StatementJewelry #JewelryAddict #Diamond #DiamondRing #Purse #Clutch #FineJewelry #Choker #Silver #Gold #Birthstone #InstaModel #InstagramModel #IGModel #IGInfluencer #InstagramInfluencer #FashionInfluencer #Model #InfluencerStyle #ModelInfluencer #ModelLife #Modeling #FashionModel #ModelSearch #Photoshoot #IGers #Influencer #ModelPhotography #Portrait_IG',
   '#Eeeeeats  #FoodPhotography #FoodPorn #Foodgasm #Foodie #ForkYeah #FoodInTheAir #eeeeeats #eatingnyc #eatupnewyork #eatmunchies #forkyeah #zagat #platedpics #feastagram #eaterny #eater #feedfeed #vscofood #foodandwine #cuisine #food #recette #gourmand #homemade #foodpic #foodlover #Chefmode #EatingForTheInsta #yummy  #Delish #CleanEating #letshaveamoment #letseat #happiness #foodaddict #intolerancelife #Yum #yum #food #amazing #sweet #dinner #lunch #breakfast #fresh #tasty #delicious #eating  #foodpics #eat #hungry #hot #foods #NomNom ISeaFood #PizzaLovers #GoodEats #FoodieCrew #BonAppetit #PizzaMyHeart #ChefMode #Eeeeeats #DinnersServed #HungryAF #FoodOfTheDay #DontGoBaconMyHeart #LetsTacoBoutIt #TasteThisNext #DessertAlways #IGFood" #InstaFeast #FeastMode #FoodForFoodies #DelishDish #SundayBrunch IEatTheGoodStuff #CleanPlateClub #ImFull #CheeseburgerInParadise #Cheeseburger #WhatsForDinner #instagood #food #sweet #yummy #instapic #yum #delicious #fresh #foodie #homemade #buzzfeedfood #feedfeed #thefeedfeed #huffposttaste #foodprnshare #droolclub #f52gram #thekitchn #sweetmagazine #tastespotting #forkfeed #foodgawker #kitchenbowl #bhgfood #buzzfeast #goodeats #igfood #foodstagram #foodbloggers #nomnom #instayum#eatfamous #foodblog #hungry #eats #foodgasm #cleaneating #foodphotography #foodpics #homecooking #foodlove #foodporn #instaphoto #foodcoma #foodgram #chefmode #hungry #nom #foodstagram #eathealthy #eatwell #eatright #snack #instalove #goodeats #instafood #truecooks #eatingfortheinsta #foodstyling #foodforfoodies #eatinghealthy #eatgood #eattherainbow #eatrealfood #foodoftheday #foodography #foodism #foodaddict #foodforthought #foodisfuel #eating #eatingclean #eatstagram #foodspotting #foodlover #fooddiary #yums #foodshare #chocolate #baking #cooking #recipe #tasty #foodlovers #culinary #foodart #foodsnap #eatguide #happytummy #f52grams #goodtaste #foodphotographer #breakfast #lunch #dinner #dessert #healthy #bread #coffee #yummm #yumyum #canon #olympus #truecooks #yougottaeatthis #cleaneating #eatfamous #foodstagram #eats #igfood #goodeats #foodie #yum #foodphotography #buzzfeedfood #feedfeed #huffposttaste #foodbloggers #yummie #tastespotting #foodgawker #instayum',
   '#lifestylegoals  #lifestyleshoot  #lifestyleblogger #lifestyler #smileeveryday #everydaycarry #EverydayEveryWhere #alldayeveryday #everydayliving #everydayfunday#bestmomentsinlife #bestmomentoftheday #happymomentscaptured#goodmoments #makemoments #enjoythemoment#capturethemoment #funnymoments #magicmoments #enjoyeverymoment #magicmoments #presentmoment #momentinfinity #capturedmoment #crazymoments #specialmoment #cherisheverymoment #catchthemoment #holdthemoments #photographyeveryday #livelifenow #lovemylifestyle #lifestyleguide #storyofmylife #mycapture #myunicornlife #justgirlythings #justlikethat#justthewayyouare #justchillin #justgettingstarted #daydreaming #daydreamer #daydream #dayparty #daylightsavings #morelife #morefun #mycapturedmoment #motherhoodrising #momitforward #ig_motherhood #mynameismama #acupofmotherhood #stopdropandmom #storytellingmama #motherhoodinspired #igmotherhood #motherhoodsimplified #lifeasmama #joyfulmamas #instamom #myhonestmotherhood #motherhoodthroughig #momtog #momtogs #momlife #momcommunity #momentsinmotherhood #momlifeisthebestlife #moments_of_mom #justmomlife #messy_motherhood #slowmotherhood #magicofmotherhood #inspiremothers #instamommy #teammotherly #unitedinmotherhood #bestofmom #simplymamahood #honestlymothering #motherly #instamama #momlifestyle #mytinytribe #motherhoodintheraw #mamasgotthis #ohmamamoment #mommystatus #mommaandme #momdotme #mommylifestyle #mommalife #mommydiaries #momlove #bloggermom #mommymode #momliferocks #ohheymama #bloggersofinstagram #bloggerlife #bloggerslife #bloglife #mommyblogger #ontheblog #seekthesimplicity #livethelittlethings #lifestyleblogger #familyprojects #dailyparenting #honestlyparents #parenthood_unveiled #parenthood_moments #ourcandidlife #parentinglife #parentinghumor #parentingblogger #parentingwin #raisingthefuture #documentyourdays #lovingtheordinarymoments #everythingtribe #photosinbetween #littlefamiliesofig #dailyparenting #RSblooms #HowIsSummer #inspiremyinstagram #thatauthenticfeeling #verilymoment #littlestoriesofmylife #momentsofmine #feelfreefeed #visualcrush #theeverygirl #pursuewhatislovely #everydaymoments #lovelylittlesquares #thepursuitofjoy #lifewellcaptured #kindredmemories #subjectlight #inbeautyandchaos #beyondthewanderlust #habitatandhome #thephotographerwithin #inbeautyandchaos #portraitpage #portriats_ig #pursuewhatislovely  #nothingisordinary_ #click_vision #littlebitsof_life #lovingtheordinarymoments #bloomandgrow #aquitestyle #gatheredstyle #seekthesimplicity #momentsofmine #mystillsundaycompetition #instagood #instamood #instacool #instadaily  #instalike #instastyle #inspiremyinstagram #inspirationoftheday #littlestoriesofmylife #stylingtheseasons #bookstagram #bookshelfporn #shelfie #booknerd #bookhaul #bookworm #bibliophile #reader #igbooks #bookstack #amreading #booklovers #bookaddict #books #bookshelves #bookshelf #bookphotography #whattoread #epicreads #bookish #bookstore #mondaymotivation #mondayblues #tuesdayteacup #itsamoodywednesday #humpday #wednesdaywisdom #throwbackthursday #tbt #inmyvasesaturday #saturdaymorningflowers #sundaysundries #selfiesunday #sundayfunday #lazysunday #familyprojects',
   '#art #myart #myartwork #coolart #funart #abstractart #makearteveryday #artsy #contemporaryart #artlife #practice #wip #workinprogress #experimentalart #visualart #artoftheday #onlineart#realism #sketchbook #sketchbookart #sketching #sketchbookdrawing #dailysketches #sketchdaily #pendrawing #quicksketch #justdraw #sketchpad #sketchoftheday #pencildrawing #figuredrawing #drawsomething #draweveryday #artofdrawing #drawdaily #inkdrawing #mysketchbook #animaldrawing #fundrawing #practicedrawing #peoplesketching #realistart #paintingoftheday #watercolor_daily #watercolorartist #watercolorpainting #watercolorart #acrylicpainting #acrylicpaintings #acrylicpaintingsoncanvas #acryliconcanvas #acrylicart #watercolorsketch #watercolors #oilpaints #oilpainting #acrylics #gouache #oilart #painting #stilllife #figurepainting #practicepainting #cartoonist #illustration #illustratenow #freelanceillustrator #illustrationartist #illustrationdigital #cartoony #cartoondrawing #cartoonart #sketchdump #cartooning #sequentialart #digitalcomics #comicbookartist #indiecomic #comicstyle #illustratorlife #illustrationage #fanillustration #fanart #conceptart #conceptualart #conceptual #conceptdesign #3dmodeling #visualdevelopment #characterillustration #characterdesigner #characterart #characterdesign #characterconcept #modelsheet #visdev #visdevart #animation #animationart #animationdesign #storyboards #productionart #illustrated #digitalcolor #ocdrawing #originalcharacters #coloredsketch #backgrounds #backgroundpainting #environmentpainting #gameart #videogameart #instaart #artistoninstagram #instagramartist #illustragram #illustratorsofinstagram #instapainting #artistsofig #artistsofinstagram #instagramart #singers #music #singer #rappers #hiphop #musicians #singing #love #singersongwriter #djs #artist #artists #musician #sing #song #rapper #producer #rap #newmusic #like #follow #songwriter #rnb #soundcloud #dj #beats #musicproducer #art #musically #bhfyp #actor #model #love #actress #film #actorslife #hollywood #movie #cinema #acting #photography #instagood #movies #fashion #singer #director #theatre #bollywood #music #like #art #artist #follow #photooftheday #instagram #actors #handsome #gay #picoftheday #comedian #comedy #funny #standupcomedy #humor #memes #jokes #laugh #comedyclub #funnyvideos #fun #hilarious #standup #comedians #comedyshow #funnymemes #follow #haha #comedylife #instagram #comedyvideo #comedynight #entertainment #love',
   '#luxe #luxury #fashion #paris #luxurylifestyle #love #beauty #interiordesign #mode #instagood #picoftheday #model #gold #luxurylife #architecture #decor #like #dubai #fashionista #chic #lv #fashionblogger #furniture #trendy #jewelry #house #luxelife #hotel #luxurious #watchporn #watchoftheday #watchnerd #swisswatches #swatches #watchesofinstagram #luxurious #luxurylife #luxurystyle #billionaire #millionaire #rich #fashion #luxuryliving #newcollection #money #luxuryhomes #gucci #chanel #prada #hermes #louisvuitton #valentino #burberry #versace #jimmychoo #marcjacobs #christianlouboutin #tomford #tommyhilfiger #christiandior #menfashion #trend   #купальник #moda #путешествие #купальники #купальникимосква #турция #bespoke  #porsche #brand #brands #lamborghini #supercars #instaluxury #instacars #instasupercars #instaluxurycars #instafashion #instahouse #instahome #instatravel #instacar #instahotel #instaleather #instasale #instabrands #instalamborghini #instaprice #instaporsche #instalifestyle #instabrand #instaexperience #instaclassic #instahotels  #luxurywatch #sks #star #luxurytravel #luxuryhotel #yachts #resorts #luxuryexperiences #safari #instaluxurytravel #instaluxurylifestyle  #luxuryrealestate #bitcoin #calibercorner #wristwatchporn #instawatch #watchfam #watchgeek #keepthetime #watchcollector #horology #watchmaker #horophile #watchaddict  #lovewatches #watchphotography #watchcommunity #reloj #watchlifestyle #wristcandy #rolex #Fendi #Balenciaga #luxurybrand  #caviar #champagnebottles  #moet #luxurydesign #lamborghiniaventador #chateau #federalreserve #dollar #dollars #moneymatters #luxmoney #moneymatter #moneyinthebank #credit  #cash #billionaireboysclub  #mercedesbenz  #FineJewelry #Choker #Silver #Gold #Diamond #Luxejewelry #luxuriousliving #rollsroyce #ferrari #guccibag #mclaren #hautecouture #redcarpet #rolexaholics #hublot #swisswatches #swiss  #luxury4play #richardmille #billionairetoys #BMW #luxuryshoes #luxuryclothes #luxurybags #rogervivier #celine  #luxurywedding  #luxuryinteriors #luxurygoods #luxuryfurniture  #luxurylifestylemagazine  #miami #miamibeach #Diorshoes #chanelshoes #Guccishoes #lux #luxuryworldtraveler  #luxuryvinylplank #oro #emprender  #privatejet #privateflight #luxuryvacation  #luxuriousvacation #luxuriouslifestyle #luxurytravelphotography #audi #luxelady  #jaguar  #etype #luxurytoys #vintage  #sunglassesbranded #finejewellery #rosegold #luxuriousfurniture',
   '#politique #citation #complotsrigolos #humournoir #deconomie #espionnage #nouvelordremondial #complots #antihero #complot  #theorieduchaos #citations #politics #libreexpression #noiretblanc #expression #participatif #libertedexpression #politicien #rue #punchline #parole #soleil #faiteslesparler #projecteursolaire #gouvernement #macron #politique #giletsjaunes #giletjaune #revolution #revolte #gouvernementdemerde #gouvernementpourri #ridicule #toutpourlesriches #onvatoutbruler #onenamarre #attentionavous #revoltedupeuple #elysee #onvousauraprevenu #degageonsmacron #bandedepourris #manifestation #presidencedelarepublique #bhfyp #president #actualit #pouvoirdachat #honteavous #emmanuelmacron #taxes #volution #art #mocratie #republique #citoyen #sociale #information #rama #thomaspiketty #succession #solidarit #bulletjournal #algerianprotest #conflict #arabworld #mmf #march #police #protest #politics #trump #news #election #india #bjp #republican #usa #congress #maga #narendramodi #elections #conservative #donaldtrump #vote #america #liberal #democrat #rahulgandhi #democrats  #political #government #politicalmemes #bhfyp #bhfyp #amitshah #modi #democracy #rss #politik #capitalism  #namo #art#president #buildthewall #socialism #freedom #voting #delhi #politica #business #communism #debate #rajasthan #makeamericagreatagain #trumptrain #dailynews #result #nextpmrahulgandhi #shashitharoor #electioncommissionofindia #karnataka #donaldtrump #politicalmeme #democrats #electioncommission #government #modiwaveoff #electionresults #indianpolitics #american #follow #makeamericagreatagain #conservatives #capitalism #redwave #liberals #libertarian #ashokgehlot #socialism #politicians #rightwing ',
   '#Fitness #Fitnessaddict #Fit #Instafitness #Instafit #Fitnessmodel #Fitnessjourney #Workouts #Abs #Likesforlikes #Fitnessfreak #TopLikeTagsFitness #Workout #Fitnessmotivation #TopLikeTags #Gym ##Likeforlike #Fitnesslifestyle #Fitnessinspiration #Followforfollow #F4f #TopLikeTagscom #Likesreturned #TLTer #Likes4likes #Fitnesslife #TopLikeTagsapp #Health #Bodybuilding #Football #Instasport #Footballgame #Footballseason #Footballplayer #Footballsunday #Footballer #Soccer #Soccergame #L4l #Soccerball #Soccerlife #TopLikeTags #Soccerplayer #Likeforlike #Soccerislife #Likes4likes #Soccerteam #TopLikeTagsapp #Likesforlikes #Sports #TopLikeTagscom #Instalike #Instasoccer #Futbol #TLTer #Footballtime #Footballers #TopLikeTagsSports #Basketball #Nba #Basketballneverstops #Basketballgame #Basketballislife #Basketballseason #Basketballplayer #Likesforlikes #Basketballchallenge #TopLikeTags #Basketballshorts #Basketballlife #Basketballteam #Likeforlike #Basketballcourt #Basketballtraining #Likes4likes #Instabasketball #TopLikeTagsapp #Likesreturned #Sports #Instasport #L4l #TopLikeTagscom #TLTer #TopLikeTagsSports #Ballers #Bball #Hoop #Tennis #Tennisball #Tenniscourt #Tennisplayer #Fit #Healthy #Exercise #Training #Tennislife #Tennistime #Tennismatch #Likeforlike #Tennisteam #Tennisclub #TopLikeTags #Tennislife #Instatennis #Babolat #Head #Sports #L4l #TopLikeTagscom #Likesforlikes #Niketennis #Tennislife #TLTer #TopLikeTagsSports #Wimbledon #Footwork #Wave #Surf #Surfing #Surfinglife #Surfer #Surfingiseverything #Surfingphotography #Surfingmagazine #Likesforlikes #Surfingday #TopLikeTagscom #TopLikeTags #Surfingtime #Beach #Surfinsta #L4l #Surfingphotos #Surfingislife #Likeforlike #Instasurf #Likes4likes #Waves #Hot #Surf_shots #Likesreturned #Instabeach #Ocean #TopLikeTagsSports #Watersports #Surfporn #FitnessGoals #FitnessMotivation #Fitspo #YouCanDoIt #GoalSetting #NoExcuses #BodyGoals #GymMotivation #WeightLossMotivation #JustDoIt #FindYourStrong #GetFit #GymLife #Workout #LegDay #ChestDay #TrainHard #Gains #Toning #Squats #AbWorkout #Cardio #GirlsWhoLift #WeightTraining #bodybuilding #bodybuilder #gains #muscle #shredded #BodybuildingMotivation #BodyTransformation #FitFreak #BodybuilderLifestyle #PowerLifting #SwoleLife #CleanBulk #YogaLife #Yogi #Balance #BeginnerYoga #DailyPractice #Namaste #Flexibility #InstaYoga #YogaLifestyle #Asana #Vinyasa #crossfit #crossfitter #CrossfitGames #CrossfitCommunity #CrossTrain #CrossFitFamily #CrossFitLife #Running #RunnersOfInstagram #RunningMotivation',
   '#traveling #travelers #travelholic #travelgram #travelinggram #travelphotography #exploring #explorer #wanderer #wanderlust #doyoutravel #goexplore #travelmore #lovetotravel #wonderfulplaces #roamtheplanet #dametraveler #RSroadtrip #finditliveit #walltraveled #wanderlust #adventureseeker #doyoutravel #travelmore #goexplore #wonderfulplaces #openmyworld #lovetotravel #adventurethatislife #roamtheplanet #travelblogger #travelgram #neverstopexploring #passionpassport #travelblog #darlingescapes #stayandwander #travelbloggerlife #travelblogging #tblogger #thattravelblog #travelpreneur #digitalnomads #workandtravel #nomadiclife #locationindependent #workhardanywhere #workfromanywhere #laptoplifestyle #workabroad #officeoftheday #lifestyledesign #roomwithaview #hotellife #hotelliving #luxuryholiday #hotelstay #hotelful #responsibletravel #seekmoments #momentsofmine #postcardsfromtheworld #photographyislifee #getoutstayout #optoutside #choosemountains #travelgirl #traveldudes #solotravel #travelcouple #travelquotes #viewfromabove #beachbum #tropicalisland #lovetheocean #foreversummer #ipulledoverforthis #keepexploring #letsgosomewhere #worldtravelbook #doyoutravel #earthfocus #discoverearth #discover #worldplaces #natgeotravel #roamtheplanet #nomadlife #backpacker #backpackers #travelandlife #worldlust #bestvacation #fantastic_earth #awesome_earthpix #destinationearth #theoutbound #weekendgetaway #ig_travel #travelforlife #traveltime #worldnomads #liveadventurously  #earthoutdoors #goneoutdoors #letsgetlost #meettheworld #travelguide #bestintravel #adventureseekers #discovering #takemoreadventures #wanderout #travel_drops #traveladdicted #lovetraveling #traveldream #travelbag #worldtrip #familytravel #worldbestgram #instavacation #vacationmode #wanderout #travelstyle #travellover #travelandleisur #wanderers #travellust #travellog #travellifestyle #neverstoptraveling #travelingram #travellingram #roamtheworld #travelingpost #travellerslife #wanderingsoul #adventurelife #wanderful #starttheadventure #wanderingphotographer #getlostclub #travelmood #travelwithus #wanderlusters #packandgo #travelog #travellerlife #travelguide #culturetrip #travelcommunity #traveloften #borntotravel #travelbook #travelislife #travelista #travelinspo #searchwandercollect #globelletravels #seekmoments #travelvibes #travelstories #travellingram #nomadiclife #wanderfulglobe #iamatraveler #travelandexplore #travelquote #speechlessplaces #wearestillwild #remotework #travelquotes #theuprootedrose #wildernessnation #travelbucketlist #fulltimetravel #travelpassion #theearthoutdoors #happyadventuring #ourlonelyplanet #travelwell #postcardplaces #travelover #tblogger #visualwanderlust #meettheworld #discovervacations #vacation #familytravels #globetrotting #globetrotters #wanderlustwednsesday #stayadventurous #lifeofadventures #totravelistolive #worldbestshot #getaways #travelagent #travelalone #traveldestination #travelbuddy #travelaround'
    ]
    vectorizer = CountVectorizer() #Convert a collection of text documents to a matrix of token counts
    features = vectorizer.fit_transform(categories).todense()
    data = pd.read_csv('recommendMe/Dataset recommendMe.csv')
    test = data[['username','posts__caption']]
    test = test.dropna()
    features1 = vectorizer.transform(test["posts__caption"]).todense()
    for i in range(len(data)):
        if (pd.isnull(data['posts__caption'][i])) : 
            data['categorie'][i]='Other'
    j=0
    for i in features1:
        x=cosine_similarity(i,features)
        maxi = np.amax(x[0])
        y=np.argmax(x[0])
        if(pd.isnull(data['categorie'][j])==False):
            while(pd.isnull(data['categorie'][j])==False):
                j=j+1
        if(maxi==0): data['categorie'][j]= 'Other'
        elif(y==0): data['categorie'][j]= 'Photography'
        elif(y==1): data['categorie'][j]= 'ModeEtBienEtre'
        elif(y==2): data['categorie'][j]= 'Food'
        elif(y==3): data['categorie'][j]= 'Lifestyle'
        elif(y==4): data['categorie'][j]= 'Artist'
        elif(y==5): data['categorie'][j]= 'Luxe'
        elif(y==6): data['categorie'][j]= 'Politique'
        elif(y==7): data['categorie'][j]= 'Sport'
        elif(y==8): data['categorie'][j]= 'Travel'
        j=j+1  
    data.to_csv('recommendMe/ClassedInf.csv')
    response = json.dumps([{}])
    return HttpResponse(response,content_type='text/json')

@csrf_exempt
def userInterest(request):
    if request.method == 'POST':
        u = json.loads(request.body)
        username = u['username']
        bio = u['bio']
        following = u['following']
        postsCaption = u['postsCaption']
        categorie = 'other'
        user = User(username=username,bio=bio,following=following,postsCaption=postsCaption,categorie=categorie)
        categories = [
        '#photographyislife #photography #photographyeveryday #nikonphoto #photographyoftheday #agameoftones #photographyislifee #photographer #justgoshoot #ig_myshot #photographylover #master_shots #photographysouls #photographyprops #photographyoftheday #photographyaddict #photographylover #canon_photos #cpcollectives #portraitphotography #portraitmood #portraits_ig #portraitphotographer #makeportraits #portraitoftheday #portraitpage #rsa_portraits #bestportraits #portraitstyles_gf #ig_portrait #top_portraits #postmoreportraits #life_portraits #bestphotogram_portraits #pursuitofportraits #instagram_faces #profile_vision #featurepalette #discoverportrait #portraits_universe #ftmedd #2instagoodportraitlove #majestic_people #makeportrait #tangledinfilm #streetart #building #streetphoto #buildings #town #graffiti #architecturelovers #cities #architexture #lines #urbanart #archidaily #skyscraper #citylife #composition #archilovers #geometry #arts #streetlife #architectureporn #abstract #perspective #people #minimal #bnw #lookingup #road #geometric #photos #picture #everybodystreet #streetphoto_bw #lensculture #lensculturestreets #streetlife_award #urbanphotography #ig_street #streetview #street_photo_club #streets #streetphotography_bw #streetshot #SPiCollective #street_photography #magnumphotos #documentary #wearethestreet #streetportrait #beststreets #monochrome #hikaricreative #blackandwhitephotography #documentaryphotography #streetbwcolor #bnw_life #bnw #weddingphotography #weddingplanner #weddinginspiration #weddingideas #greenweddingshoes #instawedding #theknot #bridal #destinationwedding #bridetobe #engaged #prewedding #junebugweddings #dugunfotografcisi #weddingplanning #brideandgroom #engagement #weddinginspo #instabride #destinationweddingphotographer #weddingstyle #stylemepretty #ido #bnw #bw #blackandwhitephotography #monochrome #bnw_society #bnw_captures #bnw_life #bw_lover #blackandwhitephoto #bnw_planet #monoart #blancoynegro #bw_photooftheday #noir #bw_society #instablackandwhite #igersbnw #monochromatic #bnw_demand #insta_bw #bnw_rose #bnw_globe #white #bw_crew #bnwmood #bwstyles_gf #noiretblanc #irox_bw #monotone #rsa_bnw #fashionshoot #fashionstudy #fashionoftheday #fashioneditorial #fashionphotographer #fashiontrends #fashionforward #fashions #fashionkilla #fashioninspiration #fashionkilla #fashionworld #fashioninspiration #editorialshoot #fashiontrends #astrophotography #milkyway #astro_photography_ #nightscaper #astronomy #nightsky #nightscape #milkywaychasers #starrynight #natgeospace #astrophoto #stars #universetoday #milkywaygalaxy #longexposure #nightphotography #nightimages #nightshooters #ig_astrophotography #skymasters #space #stargazing #longexposure_shots #fs_longexpo #galaxy #longexpo #nightpics #rsa_night #longexpoelite #night_shooterz #petsofinstagram #petstagram #instapet #weeklyfluff',
        '#classy #fashionweek #stylefashion #casual #swag #suit #fashion #mode #lookbook #fashioninspiration #falllook #model #rosehappy #fashionista #instafashion #outfitoftheday #ootd #bag #armanibag #belt #armanibelt #ceinture #portefeuille #wallet #armaniwallet #accessoires #modefemme #frenchfashionblog #blogueusemode #modeuse #frenchfashionblogger #lovefashion #modefashion #styling #cute #outfitootd #modafeminina #hermosa  #fashionstyle #instamoda #ootdshare #styleblog #styleoftheday #modablogueira #outfitinspiration #lookoftheday #instyle #casualstyle #dress #jaket #jaketparkacowok #clothing #fashionterupdate #denim #denimjacket #parisfashionweek #inspiration #jeans #nike #tumblr #milan #hypebeast #sneakersaddict #shoes #kicks #stylist #italy #magazine #fashionphotography  #couture #handmade #modern #Vintage #InstaFashion #StreetStyle #FashionBlogger #OutfitOfTheDay #LookOfTheDay #FashionWeek #WhatIWore #Trend #WIW #WIWT #Look #FashionAddict #FashionLover #Fashionista #OutfitPost #FashionDaily #FashionStylist #StyleBlog #StreetWear #FashionPost #FashionGram #MensFashion #MenWithStyle #MenWithStreetStyle #MensWear #MensFashion #MensFashionPost #MenStyle #MensStyle #FashionMen #MenFashionStyle #HighFashionMen #GuysWithStyle #MensOutfit #MensOOTD #ManStyle #MaleFashion #MensWearDaily #MaleModel #MaleBlogger #StyleInspiration #Trendy #Trendsetter #HowToStyle #Vintage #BohemianLook #BohoChic #Grunge #HippieGirls #FlowerChild #Minimalist #DressedUp #Couture #UrbanStyle #OutfitInspo #OOTD #Clothes #HighFashion #CurrentlyWearing #Neutrals #Stripes #CasualStyle #CasualOutfit #Comfy #StyleOfTheDay #OutfitGoals #Shoes #NewShoes #Sneakers #SneakerHead #Boots #Booties #Heels #HighHeels #Kicks #InstaKicks #IGSneakerCommunity #Kickstagram #ShoePorn #Shoestagram #InstaShoes #SoleCollector #Shoegasm #SoleOnFire #NiceKicks #RedBottoms #ShoeStyle #ShoeGame #Accessories #Accessory #Accessorize #Jewelry #Bling #InstaJewelry #HandmadeJewelry #JewelryGram #Jewels #Necklace #Bracelet #Rings #Earrings #StatementJewelry #JewelryAddict #Diamond #DiamondRing #Purse #Clutch #FineJewelry #Choker #Silver #Gold #Birthstone #InstaModel #InstagramModel #IGModel #IGInfluencer #InstagramInfluencer #FashionInfluencer #Model #InfluencerStyle #ModelInfluencer #ModelLife #Modeling #FashionModel #ModelSearch #Photoshoot #IGers #Influencer #ModelPhotography #Portrait_IG',
        '#Eeeeeats  #FoodPhotography #FoodPorn #Foodgasm #Foodie #ForkYeah #FoodInTheAir #eeeeeats #eatingnyc #eatupnewyork #eatmunchies #forkyeah #zagat #platedpics #feastagram #eaterny #eater #feedfeed #vscofood #foodandwine #cuisine #food #recette #gourmand #homemade #foodpic #foodlover #Chefmode #EatingForTheInsta #yummy  #Delish #CleanEating #letshaveamoment #letseat #happiness #foodaddict #intolerancelife #Yum #yum #food #amazing #sweet #dinner #lunch #breakfast #fresh #tasty #delicious #eating  #foodpics #eat #hungry #hot #foods #NomNom ISeaFood #PizzaLovers #GoodEats #FoodieCrew #BonAppetit #PizzaMyHeart #ChefMode #Eeeeeats #DinnersServed #HungryAF #FoodOfTheDay #DontGoBaconMyHeart #LetsTacoBoutIt #TasteThisNext #DessertAlways #IGFood" #InstaFeast #FeastMode #FoodForFoodies #DelishDish #SundayBrunch IEatTheGoodStuff #CleanPlateClub #ImFull #CheeseburgerInParadise #Cheeseburger #WhatsForDinner #instagood #food #sweet #yummy #instapic #yum #delicious #fresh #foodie #homemade #buzzfeedfood #feedfeed #thefeedfeed #huffposttaste #foodprnshare #droolclub #f52gram #thekitchn #sweetmagazine #tastespotting #forkfeed #foodgawker #kitchenbowl #bhgfood #buzzfeast #goodeats #igfood #foodstagram #foodbloggers #nomnom #instayum#eatfamous #foodblog #hungry #eats #foodgasm #cleaneating #foodphotography #foodpics #homecooking #foodlove #foodporn #instaphoto #foodcoma #foodgram #chefmode #hungry #nom #foodstagram #eathealthy #eatwell #eatright #snack #instalove #goodeats #instafood #truecooks #eatingfortheinsta #foodstyling #foodforfoodies #eatinghealthy #eatgood #eattherainbow #eatrealfood #foodoftheday #foodography #foodism #foodaddict #foodforthought #foodisfuel #eating #eatingclean #eatstagram #foodspotting #foodlover #fooddiary #yums #foodshare #chocolate #baking #cooking #recipe #tasty #foodlovers #culinary #foodart #foodsnap #eatguide #happytummy #f52grams #goodtaste #foodphotographer #breakfast #lunch #dinner #dessert #healthy #bread #coffee #yummm #yumyum #canon #olympus #truecooks #yougottaeatthis #cleaneating #eatfamous #foodstagram #eats #igfood #goodeats #foodie #yum #foodphotography #buzzfeedfood #feedfeed #huffposttaste #foodbloggers #yummie #tastespotting #foodgawker #instayum',
        '#lifestylegoals  #lifestyleshoot  #lifestyleblogger #lifestyler #smileeveryday #everydaycarry #EverydayEveryWhere #alldayeveryday #everydayliving #everydayfunday#bestmomentsinlife #bestmomentoftheday #happymomentscaptured#goodmoments #makemoments #enjoythemoment#capturethemoment #funnymoments #magicmoments #enjoyeverymoment #magicmoments #presentmoment #momentinfinity #capturedmoment #crazymoments #specialmoment #cherisheverymoment #catchthemoment #holdthemoments #photographyeveryday #livelifenow #lovemylifestyle #lifestyleguide #storyofmylife #mycapture #myunicornlife #justgirlythings #justlikethat#justthewayyouare #justchillin #justgettingstarted #daydreaming #daydreamer #daydream #dayparty #daylightsavings #morelife #morefun #mycapturedmoment #motherhoodrising #momitforward #ig_motherhood #mynameismama #acupofmotherhood #stopdropandmom #storytellingmama #motherhoodinspired #igmotherhood #motherhoodsimplified #lifeasmama #joyfulmamas #instamom #myhonestmotherhood #motherhoodthroughig #momtog #momtogs #momlife #momcommunity #momentsinmotherhood #momlifeisthebestlife #moments_of_mom #justmomlife #messy_motherhood #slowmotherhood #magicofmotherhood #inspiremothers #instamommy #teammotherly #unitedinmotherhood #bestofmom #simplymamahood #honestlymothering #motherly #instamama #momlifestyle #mytinytribe #motherhoodintheraw #mamasgotthis #ohmamamoment #mommystatus #mommaandme #momdotme #mommylifestyle #mommalife #mommydiaries #momlove #bloggermom #mommymode #momliferocks #ohheymama #bloggersofinstagram #bloggerlife #bloggerslife #bloglife #mommyblogger #ontheblog #seekthesimplicity #livethelittlethings #lifestyleblogger #familyprojects #dailyparenting #honestlyparents #parenthood_unveiled #parenthood_moments #ourcandidlife #parentinglife #parentinghumor #parentingblogger #parentingwin #raisingthefuture #documentyourdays #lovingtheordinarymoments #everythingtribe #photosinbetween #littlefamiliesofig #dailyparenting #RSblooms #HowIsSummer #inspiremyinstagram #thatauthenticfeeling #verilymoment #littlestoriesofmylife #momentsofmine #feelfreefeed #visualcrush #theeverygirl #pursuewhatislovely #everydaymoments #lovelylittlesquares #thepursuitofjoy #lifewellcaptured #kindredmemories #subjectlight #inbeautyandchaos #beyondthewanderlust #habitatandhome #thephotographerwithin #inbeautyandchaos #portraitpage #portriats_ig #pursuewhatislovely  #nothingisordinary_ #click_vision #littlebitsof_life #lovingtheordinarymoments #bloomandgrow #aquitestyle #gatheredstyle #seekthesimplicity #momentsofmine #mystillsundaycompetition #instagood #instamood #instacool #instadaily  #instalike #instastyle #inspiremyinstagram #inspirationoftheday #littlestoriesofmylife #stylingtheseasons #bookstagram #bookshelfporn #shelfie #booknerd #bookhaul #bookworm #bibliophile #reader #igbooks #bookstack #amreading #booklovers #bookaddict #books #bookshelves #bookshelf #bookphotography #whattoread #epicreads #bookish #bookstore #mondaymotivation #mondayblues #tuesdayteacup #itsamoodywednesday #humpday #wednesdaywisdom #throwbackthursday #tbt #inmyvasesaturday #saturdaymorningflowers #sundaysundries #selfiesunday #sundayfunday #lazysunday #familyprojects',
        '#art #myart #myartwork #coolart #funart #abstractart #makearteveryday #artsy #contemporaryart #artlife #practice #wip #workinprogress #experimentalart #visualart #artoftheday #onlineart#realism #sketchbook #sketchbookart #sketching #sketchbookdrawing #dailysketches #sketchdaily #pendrawing #quicksketch #justdraw #sketchpad #sketchoftheday #pencildrawing #figuredrawing #drawsomething #draweveryday #artofdrawing #drawdaily #inkdrawing #mysketchbook #animaldrawing #fundrawing #practicedrawing #peoplesketching #realistart #paintingoftheday #watercolor_daily #watercolorartist #watercolorpainting #watercolorart #acrylicpainting #acrylicpaintings #acrylicpaintingsoncanvas #acryliconcanvas #acrylicart #watercolorsketch #watercolors #oilpaints #oilpainting #acrylics #gouache #oilart #painting #stilllife #figurepainting #practicepainting #cartoonist #illustration #illustratenow #freelanceillustrator #illustrationartist #illustrationdigital #cartoony #cartoondrawing #cartoonart #sketchdump #cartooning #sequentialart #digitalcomics #comicbookartist #indiecomic #comicstyle #illustratorlife #illustrationage #fanillustration #fanart #conceptart #conceptualart #conceptual #conceptdesign #3dmodeling #visualdevelopment #characterillustration #characterdesigner #characterart #characterdesign #characterconcept #modelsheet #visdev #visdevart #animation #animationart #animationdesign #storyboards #productionart #illustrated #digitalcolor #ocdrawing #originalcharacters #coloredsketch #backgrounds #backgroundpainting #environmentpainting #gameart #videogameart #instaart #artistoninstagram #instagramartist #illustragram #illustratorsofinstagram #instapainting #artistsofig #artistsofinstagram #instagramart #singers #music #singer #rappers #hiphop #musicians #singing #love #singersongwriter #djs #artist #artists #musician #sing #song #rapper #producer #rap #newmusic #like #follow #songwriter #rnb #soundcloud #dj #beats #musicproducer #art #musically #bhfyp #actor #model #love #actress #film #actorslife #hollywood #movie #cinema #acting #photography #instagood #movies #fashion #singer #director #theatre #bollywood #music #like #art #artist #follow #photooftheday #instagram #actors #handsome #gay #picoftheday #comedian #comedy #funny #standupcomedy #humor #memes #jokes #laugh #comedyclub #funnyvideos #fun #hilarious #standup #comedians #comedyshow #funnymemes #follow #haha #comedylife #instagram #comedyvideo #comedynight #entertainment #love',
        '#luxe #luxury #fashion #paris #luxurylifestyle #love #beauty #interiordesign #mode #instagood #picoftheday #model #gold #luxurylife #architecture #decor #like #dubai #fashionista #chic #lv #fashionblogger #furniture #trendy #jewelry #house #luxelife #hotel #luxurious #watchporn #watchoftheday #watchnerd #swisswatches #swatches #watchesofinstagram #luxurious #luxurylife #luxurystyle #billionaire #millionaire #rich #fashion #luxuryliving #newcollection #money #luxuryhomes #gucci #chanel #prada #hermes #louisvuitton #valentino #burberry #versace #jimmychoo #marcjacobs #christianlouboutin #tomford #tommyhilfiger #christiandior #menfashion #trend   #купальник #moda #путешествие #купальники #купальникимосква #турция #bespoke  #porsche #brand #brands #lamborghini #supercars #instaluxury #instacars #instasupercars #instaluxurycars #instafashion #instahouse #instahome #instatravel #instacar #instahotel #instaleather #instasale #instabrands #instalamborghini #instaprice #instaporsche #instalifestyle #instabrand #instaexperience #instaclassic #instahotels  #luxurywatch #sks #star #luxurytravel #luxuryhotel #yachts #resorts #luxuryexperiences #safari #instaluxurytravel #instaluxurylifestyle  #luxuryrealestate #bitcoin #calibercorner #wristwatchporn #instawatch #watchfam #watchgeek #keepthetime #watchcollector #horology #watchmaker #horophile #watchaddict  #lovewatches #watchphotography #watchcommunity #reloj #watchlifestyle #wristcandy #rolex #Fendi #Balenciaga #luxurybrand  #caviar #champagnebottles  #moet #luxurydesign #lamborghiniaventador #chateau #federalreserve #dollar #dollars #moneymatters #luxmoney #moneymatter #moneyinthebank #credit  #cash #billionaireboysclub  #mercedesbenz  #FineJewelry #Choker #Silver #Gold #Diamond #Luxejewelry #luxuriousliving #rollsroyce #ferrari #guccibag #mclaren #hautecouture #redcarpet #rolexaholics #hublot #swisswatches #swiss  #luxury4play #richardmille #billionairetoys #BMW #luxuryshoes #luxuryclothes #luxurybags #rogervivier #celine  #luxurywedding  #luxuryinteriors #luxurygoods #luxuryfurniture  #luxurylifestylemagazine  #miami #miamibeach #Diorshoes #chanelshoes #Guccishoes #lux #luxuryworldtraveler  #luxuryvinylplank #oro #emprender  #privatejet #privateflight #luxuryvacation  #luxuriousvacation #luxuriouslifestyle #luxurytravelphotography #audi #luxelady  #jaguar  #etype #luxurytoys #vintage  #sunglassesbranded #finejewellery #rosegold #luxuriousfurniture',
        '#politique #citation #complotsrigolos #humournoir #deconomie #espionnage #nouvelordremondial #complots #antihero #complot  #theorieduchaos #citations #politics #libreexpression #noiretblanc #expression #participatif #libertedexpression #politicien #rue #punchline #parole #soleil #faiteslesparler #projecteursolaire #gouvernement #macron #politique #giletsjaunes #giletjaune #revolution #revolte #gouvernementdemerde #gouvernementpourri #ridicule #toutpourlesriches #onvatoutbruler #onenamarre #attentionavous #revoltedupeuple #elysee #onvousauraprevenu #degageonsmacron #bandedepourris #manifestation #presidencedelarepublique #bhfyp #president #actualit #pouvoirdachat #honteavous #emmanuelmacron #taxes #volution #art #mocratie #republique #citoyen #sociale #information #rama #thomaspiketty #succession #solidarit #bulletjournal #algerianprotest #conflict #arabworld #mmf #march #police #protest #politics #trump #news #election #india #bjp #republican #usa #congress #maga #narendramodi #elections #conservative #donaldtrump #vote #america #liberal #democrat #rahulgandhi #democrats  #political #government #politicalmemes #bhfyp #bhfyp #amitshah #modi #democracy #rss #politik #capitalism  #namo #art#president #buildthewall #socialism #freedom #voting #delhi #politica #business #communism #debate #rajasthan #makeamericagreatagain #trumptrain #dailynews #result #nextpmrahulgandhi #shashitharoor #electioncommissionofindia #karnataka #donaldtrump #politicalmeme #democrats #electioncommission #government #modiwaveoff #electionresults #indianpolitics #american #follow #makeamericagreatagain #conservatives #capitalism #redwave #liberals #libertarian #ashokgehlot #socialism #politicians #rightwing ',
        '#Fitness #Fitnessaddict #Fit #Instafitness #Instafit #Fitnessmodel #Fitnessjourney #Workouts #Abs #Likesforlikes #Fitnessfreak #TopLikeTagsFitness #Workout #Fitnessmotivation #TopLikeTags #Gym ##Likeforlike #Fitnesslifestyle #Fitnessinspiration #Followforfollow #F4f #TopLikeTagscom #Likesreturned #TLTer #Likes4likes #Fitnesslife #TopLikeTagsapp #Health #Bodybuilding #Football #Instasport #Footballgame #Footballseason #Footballplayer #Footballsunday #Footballer #Soccer #Soccergame #L4l #Soccerball #Soccerlife #TopLikeTags #Soccerplayer #Likeforlike #Soccerislife #Likes4likes #Soccerteam #TopLikeTagsapp #Likesforlikes #Sports #TopLikeTagscom #Instalike #Instasoccer #Futbol #TLTer #Footballtime #Footballers #TopLikeTagsSports #Basketball #Nba #Basketballneverstops #Basketballgame #Basketballislife #Basketballseason #Basketballplayer #Likesforlikes #Basketballchallenge #TopLikeTags #Basketballshorts #Basketballlife #Basketballteam #Likeforlike #Basketballcourt #Basketballtraining #Likes4likes #Instabasketball #TopLikeTagsapp #Likesreturned #Sports #Instasport #L4l #TopLikeTagscom #TLTer #TopLikeTagsSports #Ballers #Bball #Hoop #Tennis #Tennisball #Tenniscourt #Tennisplayer #Fit #Healthy #Exercise #Training #Tennislife #Tennistime #Tennismatch #Likeforlike #Tennisteam #Tennisclub #TopLikeTags #Tennislife #Instatennis #Babolat #Head #Sports #L4l #TopLikeTagscom #Likesforlikes #Niketennis #Tennislife #TLTer #TopLikeTagsSports #Wimbledon #Footwork #Wave #Surf #Surfing #Surfinglife #Surfer #Surfingiseverything #Surfingphotography #Surfingmagazine #Likesforlikes #Surfingday #TopLikeTagscom #TopLikeTags #Surfingtime #Beach #Surfinsta #L4l #Surfingphotos #Surfingislife #Likeforlike #Instasurf #Likes4likes #Waves #Hot #Surf_shots #Likesreturned #Instabeach #Ocean #TopLikeTagsSports #Watersports #Surfporn #FitnessGoals #FitnessMotivation #Fitspo #YouCanDoIt #GoalSetting #NoExcuses #BodyGoals #GymMotivation #WeightLossMotivation #JustDoIt #FindYourStrong #GetFit #GymLife #Workout #LegDay #ChestDay #TrainHard #Gains #Toning #Squats #AbWorkout #Cardio #GirlsWhoLift #WeightTraining #bodybuilding #bodybuilder #gains #muscle #shredded #BodybuildingMotivation #BodyTransformation #FitFreak #BodybuilderLifestyle #PowerLifting #SwoleLife #CleanBulk #YogaLife #Yogi #Balance #BeginnerYoga #DailyPractice #Namaste #Flexibility #InstaYoga #YogaLifestyle #Asana #Vinyasa #crossfit #crossfitter #CrossfitGames #CrossfitCommunity #CrossTrain #CrossFitFamily #CrossFitLife #Running #RunnersOfInstagram #RunningMotivation',
        '#traveling #travelers #travelholic #travelgram #travelinggram #travelphotography #exploring #explorer #wanderer #wanderlust #doyoutravel #goexplore #travelmore #lovetotravel #wonderfulplaces #roamtheplanet #dametraveler #RSroadtrip #finditliveit #walltraveled #wanderlust #adventureseeker #doyoutravel #travelmore #goexplore #wonderfulplaces #openmyworld #lovetotravel #adventurethatislife #roamtheplanet #travelblogger #travelgram #neverstopexploring #passionpassport #travelblog #darlingescapes #stayandwander #travelbloggerlife #travelblogging #tblogger #thattravelblog #travelpreneur #digitalnomads #workandtravel #nomadiclife #locationindependent #workhardanywhere #workfromanywhere #laptoplifestyle #workabroad #officeoftheday #lifestyledesign #roomwithaview #hotellife #hotelliving #luxuryholiday #hotelstay #hotelful #responsibletravel #seekmoments #momentsofmine #postcardsfromtheworld #photographyislifee #getoutstayout #optoutside #choosemountains #travelgirl #traveldudes #solotravel #travelcouple #travelquotes #viewfromabove #beachbum #tropicalisland #lovetheocean #foreversummer #ipulledoverforthis #keepexploring #letsgosomewhere #worldtravelbook #doyoutravel #earthfocus #discoverearth #discover #worldplaces #natgeotravel #roamtheplanet #nomadlife #backpacker #backpackers #travelandlife #worldlust #bestvacation #fantastic_earth #awesome_earthpix #destinationearth #theoutbound #weekendgetaway #ig_travel #travelforlife #traveltime #worldnomads #liveadventurously  #earthoutdoors #goneoutdoors #letsgetlost #meettheworld #travelguide #bestintravel #adventureseekers #discovering #takemoreadventures #wanderout #travel_drops #traveladdicted #lovetraveling #traveldream #travelbag #worldtrip #familytravel #worldbestgram #instavacation #vacationmode #wanderout #travelstyle #travellover #travelandleisur #wanderers #travellust #travellog #travellifestyle #neverstoptraveling #travelingram #travellingram #roamtheworld #travelingpost #travellerslife #wanderingsoul #adventurelife #wanderful #starttheadventure #wanderingphotographer #getlostclub #travelmood #travelwithus #wanderlusters #packandgo #travelog #travellerlife #travelguide #culturetrip #travelcommunity #traveloften #borntotravel #travelbook #travelislife #travelista #travelinspo #searchwandercollect #globelletravels #seekmoments #travelvibes #travelstories #travellingram #nomadiclife #wanderfulglobe #iamatraveler #travelandexplore #travelquote #speechlessplaces #wearestillwild #remotework #travelquotes #theuprootedrose #wildernessnation #travelbucketlist #fulltimetravel #travelpassion #theearthoutdoors #happyadventuring #ourlonelyplanet #travelwell #postcardplaces #travelover #tblogger #visualwanderlust #meettheworld #discovervacations #vacation #familytravels #globetrotting #globetrotters #wanderlustwednsesday #stayadventurous #lifeofadventures #totravelistolive #worldbestshot #getaways #travelagent #travelalone #traveldestination #travelbuddy #travelaround'
        ]
        vectorizer = CountVectorizer() #Convert a collection of text documents to a matrix of token counts
        features = vectorizer.fit_transform(categories).todense()        
        userCaption = []
        userCaption.append(user.postsCaption)
        features1 = vectorizer.transform(userCaption).todense()
        x=cosine_similarity(features1,features)
        maxi = np.amax(x[0])
        y=np.argmax(x[0])
        if(maxi==0): user.categorie = 'Other'
        elif(y==0): user.categorie= 'Photography'
        elif(y==1): user.categorie= 'ModeEtBienEtre'
        elif(y==2): user.categorie= 'Food'
        elif(y==3): user.categorie= 'Lifestyle'
        elif(y==4): user.categorie= 'Artist'
        elif(y==5): user.categorie= 'Luxe'
        elif(y==6): user.categorie= 'Politique'
        elif(y==7): user.categorie= 'Sport'
        elif(y==8): user.categorie= 'Travel'      
        response = json.dumps([{ 'Votre centre d interet est': user.categorie }])
        with open('recommendMe/'+user.username+'Interet.csv', 'w', newline='') as csvfile:
            fieldnames = ['username','bio','following','postsCaption','categorie']
            writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
            writer.writeheader()
            writer.writerow({
                'username' : user.username, 
                'bio' : user.bio ,
                'following' : user.following ,
                'postsCaption': user.postsCaption ,
                'categorie' : user.categorie})
    return HttpResponse(response, content_type='text/json')

@csrf_exempt
def calculScore(request):
    if request.method == 'POST':
        data = pd.read_csv('recommendMe/ClassedInf.csv')
        u = json.loads(request.body)
        username = u['username']
        dataUser = pd.read_csv('recommendMe/'+username+'Interet.csv') #Les données de l'utilisateur
        i=0
        d=[]
        while i<len(data):
            if data['categorie'][i] != dataUser['categorie']:
                d.append(i)
            i+=1
        data.drop(d,inplace=True)
        #mise à jour des indices de dataset
        i=0 
        index = []
        while i<len(data):
            index.append(i)
            i+=1
        data.set_index([pd.Index(index)],inplace=True)
        followingUser = dataUser["following"] #la liste des followings
        distanceFollowersFollowing = [] #array pour stocker les distances entre les followings de u et chaque influenceur de la liste
        vec = CountVectorizer()
        k = []
        k.append(followingUser[0])
        f = vec.fit_transform(k).todense()
        index=0
        listInf = data["username"] 
        while index<len(data):
            c = []
            c.append(listInf[index])
            f1 = vec.transform(c).todense()
            distanceFollowersFollowin.append(cosine_similarity(f,f1))
            index+=1
        a = [] #array pour stocker les indices des influenceurs déjà suivis
        i = 0 
        while i<len(distanceFollowersFollowin):
            if (distanceFollowersFollowin[i][0][0]!= 0):
                a.append(i)
            i+=1
        index1=0
        while index1<len(a):
            ve = CountVectorizer()
            c = []
            c.append(data["posts__caption"][ a[index1] ])
            f = ve.fit_transform(c).todense()
            index2 = 0
            while index2<len(data):
                if (index2 == a[index1] ):
                    data["Score"][index2] = 0
                if (data["Score"][index2] !=0 ):    
                    k= []
                    k.append(data["posts__caption"][index2])
                    f1 = ve.transform(k).todense()
                    d = cosine_similarity(f,f1)
                    data["Score"][index2] = d   
                index2+=1
            index1+=1
        i=0
        while i<len(data):
            if (data['Score'][i]==0):
                data.drop(i,inplace=True)
            i+=1
        i=0 
        index = []
        while i<len(data):
            index.append(i)
            i+=1
        data.set_index([pd.Index(index)],inplace=True)
        corpus = []
        i=0
        while i<len(data):
            corpus.append(data["posts__caption"][i])
            i+=1
        corpus
        vectorizer = CountVectorizer()
        features = vectorizer.fit_transform(corpus).todense()
        user = dataUser["postsCaption"] #on récupère les # de l'utilisateur
        features1 = vectorizer.transform(user).todense()
        distances = cosine_similarity(features1[0],features)
        j=0
        while j<len(data):
            data["Score"][j] += distances[0][j]
            j+=1
        c=1
        max = data["followers__count"][0]
        min = data["followers__count"][0]
        while c<len(data):
            if(data["followers__count"][c]>max):
                max = data["followers__count"][c]
            if(data["followers__count"][c]<min):
                min = data["followers__count"][c]    
            c+=1
        i=0
        while (i<len(data)):
            data["Score"][i] += (data["followers__count"][i]-min)/(max-min)
            i+=1
        followingUser = dataUser["Following"]
        distanceFollowers = []
        vect = CountVectorizer()
        k = []
        k.append(followingUser[0])
        feat = vect.fit_transform(k).todense()
        index=0
        followersInf = data["followers"]
        while index<len(data):
            c = []
            c.append(followersInf[index])
            fea = vect.transform(c).todense()
            distanceFollowers.append(cosine_similarity(feat,fea))
            index+=1
        c=0
        while c<len(data):
            data["Score"][c] += distanceFollowers[c][0][0]
            c+=1    
        c=0
        while c<len(data):
            data["Score"][c]=data["Score"][c]/4
            c+=1
        data.sort_values(by=['Score'], ascending=False,inplace=True)
        i=0 
        index = []
        while i<len(data):
            index.append(i)
            i+=1
        data.set_index([pd.Index(index)],inplace=True)
        print(data)
        response = json.dumps([{ 'Votre centre d interet est': user.categorie }])
    return HttpResponse(response,content_type='text/json')
